<head>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes checkmark {
      0% {
        transform: scale(0) rotate(45deg);
      }
      50% {
        transform: scale(1.2) rotate(45deg);
      }
      100% {
        transform: scale(1) rotate(45deg);
      }
    }
    .checkmark {
      animation: checkmark 0.6s ease-in-out;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out;
    }
    @keyframes pulse {
      0%,
      100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }
    .pulse-custom {
      animation: pulse 2s infinite;
    }
  </style>
</head>
<body
  class="min-h-screen bg-gradient-to-br from-green-100 via-emerald-50 to-teal-100"
>
  <div class="flex items-center justify-center min-h-screen">
    <div
      class="bg-white p-10 rounded-3xl shadow-2xl text-center max-w-md w-full mx-4 fade-in-up border-2 border-green-200"
    >
      <!-- Success Icon -->
      <div class="mb-6">
        <div
          class="w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full mx-auto flex items-center justify-center shadow-lg pulse-custom"
        >
          <svg
            class="w-10 h-10 text-white checkmark"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="3"
              d="M5 13l4 4L19 7"
            ></path>
          </svg>
        </div>
      </div>

      <!-- Success Message -->
      <h2
        class="text-3xl font-extrabold text-gray-800 mb-4 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent"
      >
        üéâ ƒêƒÉng nh·∫≠p th√†nh c√¥ng!
      </h2>

      <p class="text-gray-600 text-lg mb-6">
        Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i! H·ªá th·ªëng ƒëang chu·∫©n b·ªã...
      </p>

      <!-- Loading Animation -->
      <div class="mb-6">
        <div class="flex justify-center items-center space-x-2">
          <div class="w-3 h-3 bg-green-500 rounded-full animate-bounce"></div>
          <div
            class="w-3 h-3 bg-emerald-500 rounded-full animate-bounce"
            style="animation-delay: 0.1s"
          ></div>
          <div
            class="w-3 h-3 bg-teal-500 rounded-full animate-bounce"
            style="animation-delay: 0.2s"
          ></div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
        <div
          class="bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full animate-pulse"
          style="width: 100%; transition: width 1s ease-in-out"
        ></div>
      </div>

      <p class="text-sm text-gray-500">
        ƒêang chuy·ªÉn h∆∞·ªõng trong
        <span id="countdown" class="font-bold text-green-600">3</span> gi√¢y...
      </p>
    </div>
  </div>

  <script>
    // Clear parent form v√† flash messages ƒë·ªÉ tr√°nh browser warning
    if (window.parent && window.parent !== window) {
      try {
        const parentForm = window.parent.document.querySelector("form");
        if (parentForm) {
          parentForm.reset();
        }
        // Clear flash messages in parent
        const flashMessages = window.parent.document.querySelectorAll(
          ".bg-red-100, .border-red-500"
        );
        flashMessages.forEach((msg) => msg.remove());
      } catch (e) {
        // Ignore cross-origin errors
      }
    }

    // Countdown animation
    let count = 3;
    const countdownElement = document.getElementById("countdown");

    const countdownInterval = setInterval(() => {
      count--;
      countdownElement.textContent = count;
      if (count <= 0) {
        clearInterval(countdownInterval);
        countdownElement.textContent = "0";
      }
    }, 1000);

    // Reload parent window n·∫øu trong iframe
    if (window.parent && window.parent !== window) {
      setTimeout(() => {
        // Redirect parent to home page (dashboard)
        try {
          console.log("Redirecting parent to dashboard...");
          window.parent.location.href = "/";
        } catch (e) {
          console.log("Cross-origin error, reloading parent...");
          window.parent.location.reload();
        }
      }, 2500);
    } else {
      // N·∫øu kh√¥ng trong iframe, chuy·ªÉn ƒë·∫øn trang ch·ªß
      setTimeout(() => {
        console.log("Redirecting to dashboard...");
        window.location.href = "/";
      }, 3000);
    }
  </script>
</body>
